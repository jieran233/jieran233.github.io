---
layout: post
title: WSLå®‰è£…ç¬”è®°
date: 2020-07-29 10:44:57 +0800
categories: Technology
tags: Linux
img: https://gitee.com/jieran233/pic-bed/raw/master/aZAHtH.png
---

## ä»‹ç»

### Why Linux?

ç›®å‰å›½å†… Linux æ›´å¤šçš„æ˜¯åº”ç”¨äºæœåŠ¡å™¨ä¸Šï¼Œè€Œæ¡Œé¢æ“ä½œç³»ç»Ÿæ›´å¤šä½¿ç”¨çš„æ˜¯ Windowsã€‚ä¸»è¦åŒºåˆ«å¦‚ä¸‹

| æ¯”è¾ƒ     | Windows                                                      | Linux                                                        |
| :------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| ç•Œé¢     | ç•Œé¢ç»Ÿä¸€ï¼Œå¤–å£³ç¨‹åºå›ºå®šæ‰€æœ‰ Windows ç¨‹åºèœå•å‡ ä¹ä¸€è‡´ï¼Œå¿«æ·é”®ä¹Ÿå‡ ä¹ç›¸åŒ | å›¾å½¢ç•Œé¢é£æ ¼ä¾å‘å¸ƒç‰ˆä¸åŒè€Œä¸åŒï¼Œå¯èƒ½äº’ä¸å…¼å®¹ã€‚GNU/Linux çš„ç»ˆç«¯æœºæ˜¯ä» UNIX ä¼ æ‰¿ä¸‹æ¥ï¼ŒåŸºæœ¬å‘½ä»¤å’Œæ“ä½œæ–¹æ³•ä¹Ÿå‡ ä¹ä¸€è‡´ã€‚ |
| é©±åŠ¨ç¨‹åº | é©±åŠ¨ç¨‹åºä¸°å¯Œï¼Œç‰ˆæœ¬æ›´æ–°é¢‘ç¹ã€‚é»˜è®¤å®‰è£…ç¨‹åºé‡Œé¢ä¸€èˆ¬åŒ…å«æœ‰è¯¥ç‰ˆæœ¬å‘å¸ƒæ—¶æµè¡Œçš„ç¡¬ä»¶é©±åŠ¨ç¨‹åºï¼Œä¹‹åæ‰€å‡ºçš„æ–°ç¡¬ä»¶é©±åŠ¨ä¾èµ–äºç¡¬ä»¶å‚å•†æä¾›ã€‚å¯¹äºä¸€äº›è€ç¡¬ä»¶ï¼Œå¦‚æœæ²¡æœ‰äº†åŸé…çš„é©±åŠ¨æœ‰æ—¶å¾ˆéš¾æ”¯æŒã€‚å¦å¤–ï¼Œæœ‰æ—¶ç¡¬ä»¶å‚å•†æœªæä¾›æ‰€éœ€ç‰ˆæœ¬çš„ Windows ä¸‹çš„é©±åŠ¨ï¼Œä¹Ÿä¼šæ¯”è¾ƒå¤´ç—›ã€‚ | ç”±å¿—æ„¿è€…å¼€å‘ï¼Œç”± Linux æ ¸å¿ƒå¼€å‘å°ç»„å‘å¸ƒï¼Œå¾ˆå¤šç¡¬ä»¶å‚å•†åŸºäºç‰ˆæƒè€ƒè™‘å¹¶æœªæä¾›é©±åŠ¨ç¨‹åºï¼Œå°½ç®¡å¤šæ•°æ— éœ€æ‰‹åŠ¨å®‰è£…ï¼Œä½†æ˜¯æ¶‰åŠå®‰è£…åˆ™ç›¸å¯¹å¤æ‚ï¼Œä½¿å¾—æ–°ç”¨æˆ·é¢å¯¹é©±åŠ¨ç¨‹åºé—®é¢˜ï¼ˆæ˜¯å¦å­˜åœ¨å’Œå®‰è£…æ–¹æ³•ï¼‰ä¼šä¸€ç­¹è«å±•ã€‚ä½†æ˜¯åœ¨å¼€æºå¼€å‘æ¨¡å¼ä¸‹ï¼Œè®¸å¤šè€ç¡¬ä»¶å°½ç®¡åœ¨Windowsä¸‹å¾ˆéš¾æ”¯æŒçš„ä¹Ÿå®¹æ˜“æ‰¾åˆ°é©±åŠ¨ã€‚HPã€Intelã€AMD ç­‰ç¡¬ä»¶å‚å•†é€æ­¥ä¸åŒç¨‹åº¦æ”¯æŒå¼€æºé©±åŠ¨ï¼Œé—®é¢˜æ­£åœ¨å¾—åˆ°ç¼“è§£ã€‚ |
| ä½¿ç”¨     | ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œå®¹æ˜“å…¥é—¨ã€‚å›¾å½¢åŒ–ç•Œé¢å¯¹æ²¡æœ‰è®¡ç®—æœºèƒŒæ™¯çŸ¥è¯†çš„ç”¨æˆ·ä½¿ç”¨ååˆ†æœ‰åˆ©ã€‚ | å›¾å½¢ç•Œé¢ä½¿ç”¨ç®€å•ï¼Œå®¹æ˜“å…¥é—¨ã€‚æ–‡å­—ç•Œé¢ï¼Œéœ€è¦å­¦ä¹ æ‰èƒ½æŒæ¡ã€‚     |
| å­¦ä¹      | ç³»ç»Ÿæ„é€ å¤æ‚ã€å˜åŒ–é¢‘ç¹ï¼Œä¸”çŸ¥è¯†ã€æŠ€èƒ½æ·˜æ±°å¿«ï¼Œæ·±å…¥å­¦ä¹ å›°éš¾ã€‚   | ç³»ç»Ÿæ„é€ ç®€å•ã€ç¨³å®šï¼Œä¸”çŸ¥è¯†ã€æŠ€èƒ½ä¼ æ‰¿æ€§å¥½ï¼Œæ·±å…¥å­¦ä¹ ç›¸å¯¹å®¹æ˜“ã€‚ |
| è½¯ä»¶     | æ¯ä¸€ç§ç‰¹å®šåŠŸèƒ½å¯èƒ½éƒ½éœ€è¦å•†ä¸šè½¯ä»¶çš„æ”¯æŒï¼Œéœ€è¦è´­ä¹°ç›¸åº”çš„æˆæƒã€‚ | å¤§éƒ¨åˆ†è½¯ä»¶éƒ½å¯ä»¥è‡ªç”±è·å–ï¼ŒåŒæ ·åŠŸèƒ½çš„è½¯ä»¶é€‰æ‹©è¾ƒå°‘ã€‚           |

è€Œåœ¨å¼€å‘ä¸­ï¼Œæ— è®ºæ˜¯å¼€å‘ç¯å¢ƒçš„éƒ¨ç½²ï¼Œè¿˜æ˜¯å®‰è£…è½¯ä»¶åŒ…ï¼ŒLinuxéƒ½è¦æ¯”Windowsæ–¹ä¾¿å¾—å¤š<img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_37_doge.png" style="zoom:25%;" />

### Why WSL?

åœ¨Windowsç”µè„‘ä¸Šå®‰è£…Linuxï¼Œæ— éå°±è¿™å‡ ç§æ–¹æ¡ˆï¼š

- åŒç³»ç»Ÿ
- è™šæ‹Ÿæœº
- å­ç³»ç»Ÿï¼ˆWindows Subsystem for Linuxï¼‰

åœ¨åŒç³»ç»Ÿã€è™šæ‹Ÿæœºã€å­ç³»ç»Ÿä¸‰è€…ä¸­ï¼Œé¦–å…ˆæ’é™¤äº†åŒç³»ç»Ÿï¼Œé¦–å…ˆä¸èƒ½éšæ—¶åˆ‡æ¢ï¼Œè€Œä¸”åœ¨æ–°çš„ç³»ç»Ÿä¸­é‡ç°å½“å‰å·¥ä½œç¯å¢ƒï¼ˆä¸åªæ˜¯å¼€å‘ç¯å¢ƒï¼‰ä»£ä»·å¤ªå¤§ã€‚è€Œè™šæ‹Ÿæœºéœ€è¦é¢å¤–å®‰è£…è½¯ä»¶ä¸”æœ‰é¢å¤–èµ„æºå¼€é”€ï¼Œäºæ˜¯å°è¯•åœ¨å­ç³»ç»Ÿä¸­æŠ˜è…¾ä¸€æŠŠã€‚

## å¯ç”¨&å®‰è£…

### å¯ç”¨ WSL

æ§åˆ¶é¢æ¿â†’ç¨‹åºå’ŒåŠŸèƒ½â†’å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½ï¼ˆä¹Ÿæœ‰çš„Win10ç‰ˆæœ¬è¿™ä¸ªå«æ‰“å¼€æˆ–å…³é—­WindowsåŠŸèƒ½ï¼‰

æˆ–è€…ç›´æ¥`Win+S`è¾“å…¥`q`ï¼Œåæ­£æˆ‘è¿™é‡Œæ˜¯èƒ½åŒ¹é…åˆ°å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½<img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_64_shounuehuaji.png" style="zoom:25%;" />

<img src="https://s1.ax1x.com/2020/07/29/aZZQ61.png" style="zoom:67%;" />

æ‰¾åˆ°â€œé€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿâ€ï¼Œå‹¾é€‰å®ƒï¼Œç‚¹å‡»ç¡®å®š

ç„¶åWindowså°±ä¼šå¼€å§‹æ·»åŠ åŠŸèƒ½äº†ï¼Œæ·»åŠ å®Œæ¯•åå¯èƒ½éœ€è¦é‡å¯

### å®‰è£… Ubuntu

å®Œæˆä¹‹åï¼Œå» Microsoft Store æœç´¢ Ubuntu ï¼Œä¸‹è½½

<img src="https://s1.ax1x.com/2020/07/29/aZAHtH.png" style="zoom:67%;" />

å®‰è£…å®Œæˆä¹‹åå…ˆåˆ«æ€¥ç€å¯åŠ¨ï¼Œå…ˆè¿›è¡Œä¸‹ä¸€æ­¥

### æ›´æ–° WSL 2

æ‰“å¼€é“¾æ¥ä¸‹è½½æ›´æ–°WSL2ï¼š [æ›´æ–° WSL 2 Linux å†…æ ¸](https://docs.microsoft.com/zh-cn/windows/wsl/wsl2-kernel)

### å¯åŠ¨ Ubuntu

åšå®Œä¸Šé¢çš„æ“ä½œï¼Œå°±å¯ä»¥å¯åŠ¨ Ubuntu å•¦<img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_37_doge.png" style="zoom:25%;" />

![](https://s1.ax1x.com/2020/07/29/aZK0dx.png)

å¦‚å›¾ï¼Œå¾…å®‰è£…å®Œæ¯•åï¼Œå³å¯è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œå¼€å§‹ä½¿ç”¨Ubuntuå•¦<img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_37_doge.png" style="zoom:25%;" />

ï¼ˆé¡ºä¾¿ä¸€è¯´ï¼Œåœ¨ cmd ä¸­è¾“å…¥ bash ä¹Ÿèƒ½å¯åŠ¨WSLï¼‰

## éƒ¨ç½²

### Ubuntuæ¢æº

è¿™ä¸€æ­¥ä¸æ˜¯å¿…é¡»çš„ã€‚å‰ææ˜¯ä½ çš„ç½‘ç»œè¶³å¤Ÿå¥½ï¼Œæˆ–è€…ä½ æœ‰ç¿»å±±è¶Šå²­çš„æœ¬é¢†<img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_64_shounuehuaji.png" style="zoom:25%;" />
é¦–å…ˆï¼Œåˆ‡æ¢åˆ°è¶…çº§ç”¨æˆ·ã€‚æ‰§è¡Œ`sudo su`å¹¶è¾“å…¥ä½ çš„å¯†ç ã€‚

ç„¶åï¼Œæ—¢ç„¶è¦ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶ï¼Œé‚£ä¹ˆè‚¯å®šè¦å…ˆå¤‡ä»½ï¼Œå¤åˆ¶ä¸€ä¸‹æˆ‘ä»¬éœ€è¦çš„ä¿®æ”¹çš„`sources.list`ã€‚

```bash
cp /etc/apt/sources.list /etc/apt/sources.list.bak
```

ç„¶åæ‰§è¡Œ`vi /etc/apt/sources.list`ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹viç¼–è¾‘å™¨çš„ç”¨æ³•ï¼Œå› ä¸ºæˆ‘æ•´è¿™ä¸ªæ•´äº†åŠå¤©éƒ½æ²¡æå®š<img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_64_shounuehuaji.png" style="zoom:25%;" />

<img src="https://s1.ax1x.com/2020/07/29/aZ35RK.png" style="zoom:67%;" />

æ‰§è¡Œå®Œäº†ä½ çœ‹åˆ°çš„å¤§æ¦‚æ˜¯è¿™æ ·ä¸€ä¸ªæ ·å­ï¼Œè¿™å°±æ˜¯viç¼–è¾‘å™¨ï¼Œæƒ³äº†è§£æ›´å¤šå¯ä»¥å»è‡ªè¡Œå­¦ä¹ <img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_37_doge.png" style="zoom:25%;" />

æŒ‰**`i`**é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼

åœ¨æ–‡ä»¶æœ€å¼€å§‹æ·»åŠ å¦‚ä¸‹ä¿¡æ¯ï¼ˆå®šä½åˆ°æ–‡ä»¶æœ€å¼€å§‹ï¼Œæ¢è¡Œï¼Œ**`ğŸ–±å³é”®`**ç²˜è´´ï¼‰ï¼š

```
deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
```

æŒ‰**`ESC`**é”®é€€å‡ºç¼–è¾‘æ¨¡å¼

è¾“å…¥**`:wq`**ä¿å­˜å¹¶é€€å‡ºviç¼–è¾‘å™¨

### æ›´æ–°&å‡çº§

```bash
sudo apt update
sudo apt upgrade
sudo apt autoremove
```

æ‰§è¡Œæ­¤è¿‡ç¨‹éœ€è¦ä¸€å®šçš„æ—¶é—´ï¼Œè¯·åå’Œæ”¾å®½<img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_64_shounuehuaji.png" style="zoom:25%;" />

å…¶ä¸­ç¬¬ä¸‰ä¸ªå‘½ä»¤ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯æ—¢ç„¶æœ‰ç”¨ä¸åˆ°çš„åŒ…ä½•ä¸åŠæ—¶æ¸…ç†å‘¢ï¼Ÿ
å¦å¤–è¯´æ˜ä¸€ä¸‹ï¼Œå¦‚æœå‘½ä»¤æ‰§è¡ŒæœŸé—´æœ‰æŠ¥é”™æˆ–å¡ä½çš„æƒ…å†µï¼Œç›´æ¥`ctrl+C`é‡æ–°æ‰§è¡Œå³å¯ï¼Œå®ƒä¼šè‡ªåŠ¨è·³è¿‡ä¹‹å‰å·²å®Œæˆçš„éƒ¨åˆ†ï¼ˆget åºå·ä¼šä»1é‡æ–°å¼€å§‹è®¡æ•°ï¼Œä½†ä¸ä¼šé‡æ–°getå·²å®Œæˆçš„åŒ…ï¼‰ã€‚
å¦å¤–å¦‚æœé‡åˆ°`bluemen`çš„æŠ¥é”™ï¼Œå¯ä»¥å¿½ç•¥ä¸ç®¡ã€‚

**åé¢æ²¡æ—¶é—´å†™äº†ï¼Œå…ˆç›´æ¥å¤åˆ¶ç²˜è´´å§ï¼Œæœ‰ç©ºå†å¥½å¥½æ”¹<img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_64_shounuehuaji.png" style="zoom:25%;" /><img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_37_doge.png" style="zoom:25%;" />**


### å®‰è£…æ¡Œé¢ç¯å¢ƒxubuntu

```bash
sudo apt install xubuntu-desktop
```

~~è¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ~~ï¼Œè¯·åŠ¡å¿…åå’Œæ”¾å®½<img src="https://gitee.com/jieran233/pic-bed/raw/master/coolapk_emotion_64_shounuehuaji.png" style="zoom:25%;" />

è¯´æ˜ä¸€ä¸‹ï¼Œæœ¬äººæœ€å¼€å§‹æ‰§ç€äº`gnome`æ¡Œé¢ï¼Œåœ¨å„ç§googleæ— æœåé€‰æ‹©äº†æœé”™è¿‡ç¨‹ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„`xfce4`ï¼ŒåŒæ—¶äº†è§£åˆ°`xubuntu`æ˜¯`xfce4`çš„ä¸€ä¸ªæ‰©å±•ï¼Œäºæ˜¯é‡‡ç”¨`xubuntu`æ¡Œé¢ç¯å¢ƒï¼Œåœ¨ä½¿ç”¨äº†å‡ å¤©åå‘ç°è¿˜æŒºå¥½ç”¨ï¼Œå®ƒé‡Œé¢å†…ç½®äº†è‹¥å¹²`panel`å¯ä¾›æ›¿æ¢ï¼ˆè¿™ä¸ªåé¢å†è¯´ï¼‰ã€‚å¦‚æœå¼¹å‡ºé€‰æ‹©gdm3æˆ–lightdmï¼Œé€‰æ‹©gdm3

### å®‰è£…è¿œç¨‹æ¡Œé¢æœåŠ¡xrdp

```bash
sudo apt install xrdp
```

è¿™ä¸ªå°±æ˜¯ç›´æ¥è·Ÿwindowsäº¤äº’çš„å“¥ä»¬äº†ï¼Œæœ‰å…³å…¶åŸç†çš„ä»‹ç»å¯ä»¥å‚è€ƒ[è¿™ç¯‡æ–‡ç« ](https://blog.csdn.net/zhangxinrun/article/details/7332049)ï¼Œä¸è¿‡ä¸çœ‹ä¹Ÿæ²¡å…³ç³»ï¼Œä¸å½±å“ä½¿ç”¨ã€‚
å¦å¤–æœ‰çš„æ•™ç¨‹ä¼šè®©ä½ å®‰è£…`xorg`ä¸`xfce4`ï¼Œè¿™ä¸¤ä¸ªçš„å®‰è£…å…¶å®åœ¨ä¸Šä¸€æ­¥`sudo apt install xubuntu-desktop`çš„æ—¶å€™å·²ç»å®Œæˆäº†ã€‚

### é…ç½®xrdpç«¯å£

```bash
sudo sed -i 's/port=3389/port=3390/g' /etc/xrdp/xrdp.ini
```

è¿™é‡Œé¢3389æ˜¯é»˜è®¤é…ç½®ï¼Œè¿™é‡Œå°†å…¶æ”¹ä¸º3390æ˜¯é¿å…å’Œwindowsçš„ç«¯å£å†²çªã€‚æˆ‘ä»¬æŠ˜è…¾çš„æ˜¯å­ç³»ç»Ÿä¸æ˜¯è™šæ‹Ÿæœºï¼Œä¸¤è¾¹çš„ç«¯å£å·æ˜¯é€šçš„ã€‚æ¯”å¦‚åœ¨wslä¸­å¼€ä¸€ä¸ª8080ç«¯å£çš„WebServerï¼Œåœ¨windowsä¸­å¼€æµè§ˆå™¨æ˜¯å¯ä»¥ç›´æ¥è®¿é—®çš„ã€‚

### é…ç½®xsession

```bash
sudo echo xfce4-session >~/.xsession
```

è¿™ä¸€æ­¥å…¶å®æ˜¯åœ¨å‘Šè¯‰ç³»ç»Ÿï¼Œå¼€å¯æ¡Œé¢ç¯å¢ƒçš„æ—¶å€™å¼€å¯ä»€ä¹ˆæ¡Œé¢ç¯å¢ƒã€‚ä¸ºä»€ä¹ˆæ˜¯`xfce4`å‘¢ï¼Œä¸Šé¢ä¹Ÿè¯´äº†`xubuntu`æœ¬è´¨å°±æ˜¯`xfce4`åŠ ä¸Šä¸€äº›æ’ä»¶ä¸è½¯ä»¶ã€‚

### é‡å¯ä¸€ä¸‹ç”µè„‘

ä¸é‡å¯çš„æ—¶å€™ä¼šæŠ¥é”™

```
connecting to sesman ip 127.0.0.1 port 3350 
sesman connect ok
sending login info to session manager, please wait...
login successful for display 25
started connecting
connection problem, giving up
some problerm
```

### å¯åŠ¨xrdp

```bash
sudo service xrdp restart
```

è¿™é‡Œç”¨`start`ä¹Ÿè¡Œ`restart`ä¹Ÿè¡Œï¼Œæ—¢ç„¶éƒ½å¯ä»¥ï¼Œå½“ç„¶åè€…ç”¨èµ·æ¥æ›´æ–¹ä¾¿ã€‚
å¯åŠ¨æˆåŠŸåä¼šçœ‹åˆ°å¦‚ä¸‹æç¤º

```
 * Starting Remote Desktop Protocol server 
[20190514-19:06:59] [DEBUG] Testing if xrdp can listen on 0.0.0.0 port 3390.
[20190514-19:06:59] [DEBUG] Closed socket 6 (AF_INET6 :: port 3390)[ OK ]
```

### è¿œç¨‹è¿æ¥

åœ¨windowså¼€å§‹èœå•ä¸­æœ`è¿œç¨‹æ¡Œé¢`æ‰“å¼€ååœ¨`è®¡ç®—æœº`åé¢è¾“å…¥`localhost:3390`ç‚¹å‡»è¿æ¥ã€‚é¦–æ¬¡è¿æ¥å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ã€‚
ç”¨æˆ·åå¯†ç å¯ä»¥å…ˆå†™ï¼Œä¹Ÿå¯ä»¥ä¸å†™ï¼Œç½‘ä¸Šæœ‰æ•™ç¨‹è¿˜å‹¾é€‰äº†ä¿å­˜å‡­æ®çš„ï¼Œè¿™ä¸ªçœ‹ä¸ªäººä¹ æƒ¯å§ï¼Œæˆ‘ç”¨è½¯ä»¶ä»æ¥ä¸å‹¾é€‰è®°ä½å¯†ç çš„ã€‚

### æ±‰åŒ–

å…¶å®Linuxæ±‰åŒ–æ˜¾å¾—å¾ˆlowï¼Œä½†å’±è¿™è‹±è¯­æ°´å¹³åœ¨å¤„ç†ä¸€äº›æ„Ÿå¹å·å¼¹çª—çš„æ—¶å€™çœ‹ä¸æ‡‚æç¤ºä¸æ•¢çç‚¹yesè¿˜æ˜¯noï¼Œæ‰€ä»¥æ±‰åŒ–æ­¥éª¤æ”¾åœ¨è¿™ï¼Œçœ‹å®˜ä¾æ®ä¸ªäººå£å‘³å§ã€‚

```bash
sudo dpkg-reconfigure locales
```

ç„¶åä¸€ç›´æŒ‰é”®ç›˜ä¸Šçš„`â†“`æ‰¾åˆ°`zh_CN UTF-8`ï¼Œç„¶åæŒ‰ç©ºæ ¼å‹¾é€‰ï¼Œå†`tab`åˆ‡æ¢åˆ°`ok`ä¸Šå›è½¦ï¼Œæ¥ä¸‹æ¥çš„ç•Œé¢é€‰`zh`å†å›è½¦ã€‚
è¿™ä¸€æ­¥å®Œæˆåå¯èƒ½ä¼šå¯¼è‡´é”®ç›˜ä¸å¯ç”¨ï¼Œä¸ç”¨æ¿€åŠ¨ï¼Œç‚¹å‡»æ¡Œé¢å·¦ä¸Šè§’å›¾æ ‡æ³¨é”€åé‡è¿›å°±å¥½äº†ã€‚
é¦–æ¬¡è¿›å…¥ä¸­æ–‡ç•Œé¢ä¼šæç¤ºæ˜¯å¦é‡å‘½åé‚£å‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œå»ºè®®ä¿æŒè‹±æ–‡çŠ¶æ€ï¼Œå› ä¸ºæœ‰äº›è·¯å¾„æ˜¯å†™è¿›é…ç½®æ–‡ä»¶äº†çš„ï¼Œé‡å‘½åä¼šå¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ã€‚

## å¸¸è§é—®é¢˜

### **1ã€è¿œç¨‹æ¡Œé¢é—ªé€€ï¼Œshellå¯ä»¥ç”¨çš„é—®é¢˜ï¼š**

#### ï¼ˆ1ï¼‰éœ€è¦åœ¨è¯¥ç”¨æˆ·ç›®å½•åˆ›å»ºä¸€ä¸ª.xsessionï¼š

```bash
touch .xsession
```

#### ï¼ˆ2ï¼‰é‡Œé¢å†™â€œxfce4-sessionâ€ä¸€å¥è¯å°±è¡Œï¼š

```bash
echo xfce4-session >~/.xsession
```

#### ï¼ˆ3ï¼‰ç„¶åè¿›å…¥åˆ°ç”¨æˆ·ç›®å½•ä¸‹

```bash
sudo chown username:username .xsession
```

### **2ã€windowsæ¡Œé¢è¿æ¥åè¿œç¨‹ä½¿ç”¨Terminalæ—¶ï¼ŒTabé”®æ— æ³•è‡ªåŠ¨è¡¥å…¨ã€‚**

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯ä½¿ç”¨ctrl+içš„ã€‚ Tabé”®è¢«å ç”¨ä½œä¸ºå…¶ä»–çš„å¿«æ·é”®ã€‚æƒ³è¦ä¿®æ”¹ï¼Œåœ¨windows managerï¼ˆçª—å£ç®¡ç†å™¨ï¼‰ä¸­ï¼Œkeyboard é‡Œå°†ç”¨åˆ° Super + Tabçš„å¿«æ·é”®clearæ‰å³å¯ã€‚

### **3ã€è¿œç¨‹æ¡Œé¢è¿›å»ä¹‹åæ²¡æœ‰èœå•æ ï¼š**

å³é”®é¢æ¿->é¢æ¿é¦–é€‰é¡¹->backup and restore -> apply configurationå›¾æ ‡

### **4ã€è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå‡ºç°xrdp_mm_process_login_response: login failed**

é—®é¢˜åŸå› ï¼šè¿œç¨‹æ¡Œé¢æ²¡æœ‰æ­£ç¡®å…³é—­ï¼Œè™½ç„¶åœ¨windows ç³»ç»Ÿå…³é—­è¿œç¨‹æ¡Œé¢è¿æ¥ï¼Œä½†æ˜¯åœ¨é‡Œlinuxä¸Šçš„è¿›ç¨‹è¿˜åœ¨è¿è¡Œï¼Œå¯¼è‡´è¿æ¥æ•°é‡è¾¾åˆ°ä¸Šé™ï¼Œå‡ºç°é—®é¢˜ã€‚
è§£å†³ï¼šé€šè¿‡è®¾ç½®sesman.inæ–‡ä»¶å†…çš„å‚æ•°è§£å†³ï¼š

```bash
cat /etc/xrdp/sesman.ini
vi /etc/xrdp/sesman.ini
```

å¯ä»¥ä¿®æ”¹ä¼šè¯è®¾ç½® ï¼šå°†æœ€å¤§ä¼šè¯é™åˆ¶è¯¥å¤§ MaxSessions=50; å°†KillDisconnected=1ï¼›åˆ™æ¯æ¬¡æ–­å¼€è¿æ¥æ—¶ï¼Œlinuxéƒ½ä¼šå…³é—­ä¼šè¯è¿›ç¨‹ã€‚ ç„¶åé‡å¯/etc/init.d/xrdp restart å°±å¯è§£å†³é—®é¢˜

### **5ã€é”™è¯¯å¦‚ä¸‹ï¼š**

```bash
connecting to sesman ip 127.0.0.1 port 3350
sesman connect ok
sending login info to session manager, please wait
xrdp_mm_process_login_response: login successful for display
started connecting
connecting to 127.0.0.1:5921
tcp connected
security level is 2 
password failed
error - problem connecting
```

#### ï¼ˆ1ï¼‰ç¬¬ä¸€ç§æƒ…å†µï¼š

```bash
sudo vim /var/log/xrdp-sesman.log
```

xrdp-sesman.logä¸‹é”™è¯¯ä¸ºï¼š

```bash
[INFO ] starting Xvnc session...
[ERROR] X server for display 10 startup timeout[INFO ] starting xrdp-sessvc - xpid=2924 - wmpid=2923
[ERROR] X server for display 10 startup timeout
[ERROR] another Xserver is already active on display 10
[DEBUG] aborting connection... 
```

å¦‚æœä½ çš„logä¹Ÿæœ‰ç±»ä¼¼ X server for display 10 startup timeoutå’Œanother Xserver is already active on display 10ã€‚é—®é¢˜æ ¹æºåœ¨äºtightvncï¼Œå‡ºç°é—®é¢˜çš„ç‰ˆæœ¬è·ŸXå­—ä½“æœ‰å†²çªï¼Œå¯¼è‡´è¿æ¥Xserverå‡ºé”™ã€‚
è§£å†³åŠæ³•ï¼š

```bash
apt-get purge tightvnc xrdp
apt-get install tightvncserver xrdp
```

æœ€åï¼Œå¯åŠ¨xrdpæœåŠ¡

```bash
sudo /etc/init.d/xrdp restart
```

æ­¤æ—¶ä¼šå¯ç”¨ç›¸åº”ç«¯å£ï¼Œé…ç½®æ–¹é¢é»˜è®¤å³å¯ã€‚é€šè¿‡å‘½ä»¤ï¼š

```bash
netstat  -tnl
```

æŸ¥çœ‹ 3350 3389 5910 è¿™ä¸‰ä¸ªç«¯å£å¤„äºLISTENï¼Œä¸€èˆ¬å°±æ²¡é—®é¢˜äº†ã€‚

#### ï¼ˆ2ï¼‰ç¬¬äºŒç§æƒ…å†µï¼š

å¦‚æœæ—¥å¿—é‡Œè·Ÿç¬¬ä¸€ç§æƒ…å†µä¸åŒï¼Œå¯ä»¥è€ƒè™‘å¦‚ä¸‹æ–¹å¼è§£å†³ï¼š

```bash
sudo vim /etc/xrdp/sesman.ini
```

æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œï¼š

```bash
param8=-SecurityTypes
param9=None
```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200519221627710.png)
ä¿®æ”¹å®Œé‡å¯xrdpæœåŠ¡:

```bash
sudo /etc/init.d/xrdp restart
```

è‹¥ä¸Šè¿°é—®é¢˜è¿˜æ˜¯æ— æ³•è§£å†³ï¼Œå¯å¸è½½xrdpæœåŠ¡ï¼Œè¿›è¡Œé‡è£…ï¼Œå¹¶å¦‚ä¸Šè¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œä¿®æ”¹sesman.iniæ–‡ä»¶ã€‚å¸è½½xrdpçš„å‘½ä»¤ä¸ºï¼š

```bash
sudo apt-get purge xrdp
sudo apt-get purge tightvncserver
```

## å‚è€ƒèµ„æ–™

https://www.runoob.com/linux/linux-intro.html

**https://blog.csdn.net/xmh19936688/article/details/90212960**

https://blog.csdn.net/weixin_41921520/article/details/106224404